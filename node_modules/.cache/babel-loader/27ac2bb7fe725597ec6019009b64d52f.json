{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var baseURL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT';export var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var response,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(baseURL,\"/posts\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:results=_context.sent;return _context.abrupt(\"return\",results);case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log('error getting all posts');case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getPosts(_x){return _ref.apply(this,arguments);};}();export var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username,password){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(baseURL,\"/users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;return _context2.abrupt(\"return\",result);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log('error registering user');case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function registerUser(_x2,_x3){return _ref2.apply(this,arguments);};}();export var loginUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username,password){var response,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(baseURL,\"/users/login\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:result=_context3.sent;return _context3.abrupt(\"return\",result);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log('error logging in user');case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function loginUser(_x4,_x5){return _ref3.apply(this,arguments);};}();export var getUserDetails=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token){var response,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(baseURL,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:result=_context4.sent;return _context4.abrupt(\"return\",result);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log('error getting users details');case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function getUserDetails(_x6){return _ref4.apply(this,arguments);};}();export var createPost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(token,_ref5){var title,description,price,location,willDeliver,response,result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:title=_ref5.title,description=_ref5.description,price=_ref5.price,location=_ref5.location,willDeliver=_ref5.willDeliver;_context5.prev=1;_context5.next=4;return fetch(\"\".concat(baseURL,\"/posts\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context5.sent;_context5.next=7;return response.json();case 7:result=_context5.sent;return _context5.abrupt(\"return\",result);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](1);console.log('error creating a new post');case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[1,11]]);}));return function createPost(_x7,_x8){return _ref6.apply(this,arguments);};}();export var updatePost=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref7){var token,title,description,price,location,willDeliver,_id,response,result;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:token=_ref7.token,title=_ref7.title,description=_ref7.description,price=_ref7.price,location=_ref7.location,willDeliver=_ref7.willDeliver,_id=_ref7._id;_context6.prev=1;_context6.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat([_id]),{method:\"PATCH\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context6.sent;_context6.next=7;return response.json();case 7:result=_context6.sent;return _context6.abrupt(\"return\",result);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);console.log('error updating post');case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function updatePost(_x9){return _ref8.apply(this,arguments);};}();export var deletePost=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(token,postID){var response,results;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context7.sent;_context7.next=6;return response.json();case 6:results=_context7.sent;console.log(results);returm(results);_context7.next=14;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](0);console.log('error deleting post');case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[0,11]]);}));return function deletePost(_x10,_x11){return _ref9.apply(this,arguments);};}();export var createMessage=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(_ref10){var postID,token,message,response,result;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:postID=_ref10.postID,token=_ref10.token,message=_ref10.message;_context8.prev=1;_context8.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID,\"/messages\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({message:message})});case 4:response=_context8.sent;_context8.next=7;return response.json();case 7:result=_context8.sent;_context8.next=13;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](1);console.log('error creating message');case 13:case\"end\":return _context8.stop();}}},_callee8,null,[[1,10]]);}));return function createMessage(_x12){return _ref11.apply(this,arguments);};}();","map":{"version":3,"names":["baseURL","getPosts","token","fetch","headers","response","json","results","console","log","registerUser","username","password","method","body","JSON","stringify","user","result","loginUser","getUserDetails","createPost","title","description","price","location","willDeliver","post","updatePost","_id","deletePost","postID","returm","createMessage","message"],"sources":["/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/src/api/index.js"],"sourcesContent":["const baseURL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT'\n\nexport const getPosts = async (token) => {\n    try {\n        const response = await fetch(`${baseURL}/posts`, {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            }\n        });\n        const results = await response.json();\n        return results;\n    } catch (error) {\n        console.log('error getting all posts')\n    }\n}\n\nexport const registerUser = async (username, password) => {\n    try {\n        const response = await fetch(`${baseURL}/users/register`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                user: {\n                    username: username,\n                    password: password\n                }\n            })\n        })\n\n        const result = await response.json();\n        return result;\n    } catch (error) {\n        console.log('error registering user')\n    }\n}\n\nexport const loginUser = async (username, password) => {\n    try {\n        const response = await fetch(`${baseURL}/users/login`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                user: {\n                    username,\n                    password\n                }\n            })\n        })\n\n        const result = await response.json();\n\n        return result;\n\n    } catch (ex) {\n        console.log('error logging in user')\n    }\n}\n\nexport const getUserDetails = async (token) => {\n    try {\n        const response = await fetch(`${baseURL}/users/me`, {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n        })\n\n        const result = await response.json();\n        return result;\n\n    } catch (ex) {\n        console.log('error getting users details')\n    }\n}\n\nexport const createPost = async (token, { title, description, price, location, willDeliver }) => {\n    try {\n        const response = await fetch(`${baseURL}/posts`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                post: {\n                    title,\n                    description,\n                    price,\n                    location,\n                    willDeliver,\n                }\n            })\n        })\n\n        const result = await response.json();\n        return (result);\n    } catch (ex) {\n        console.log('error creating a new post')\n    }\n}\n\nexport const updatePost = async ({ token, title, description, price, location, willDeliver, _id }) => {\n    try {\n        const response = await fetch(`${baseURL}/posts/${[_id]}`, {\n            method: \"PATCH\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                post: {\n                    title,\n                    description,\n                    price,\n                    location,\n                    willDeliver\n                }\n            })\n        })\n\n        const result = await response.json();\n        return result;\n    } catch (ex) {\n        console.log('error updating post')\n    }\n}\n\nexport const deletePost = async (token, postID) => {\n    try {\n        const response = await fetch(`${baseURL}/posts/${postID}`, {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            }\n        })\n        const results = await response.json();\n        console.log(results)\n        returm(results)\n    } catch (ex) {\n        console.log('error deleting post')\n    }\n}\n\nexport const createMessage = async ({ postID, token, message }) => {\n    try {\n        const response = await fetch(`${baseURL}/posts/${postID}/messages`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                message\n            })\n        })\n        const result = await response.json();\n\n    } catch (ex) {\n        console.log('error creating message')\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}