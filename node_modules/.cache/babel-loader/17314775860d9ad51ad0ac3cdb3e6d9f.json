{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{Route,BrowserRouter,Routes,useNavigate}from'react-router-dom';import'./style.css';import{Navbar,Posts,Profile,Home,Register,Login,CreatePost,SinglePostView,EditPost}from'./components';import{getPosts,getUserDetails}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var navigate=useNavigate();function logout(){window.localStorage.removeItem('token');setToken('');setUser({});}function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(token);case 2:results=_context.sent;setPosts(results.data.posts);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchPosts.apply(this,arguments);}function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){fetchPosts();},[token]);useEffect(function(){getMe();},[token]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{logout:logout,token:token}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{posts:posts})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"posts/create-post\",element:/*#__PURE__*/_jsx(CreatePost,{fetchPosts:fetchPosts,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/edit-post/:postID\",element:/*#__PURE__*/_jsx(EditPost,{posts:posts,token:token,fetchPosts:fetchPosts,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postID\",element:/*#__PURE__*/_jsx(SinglePostView,{posts:posts,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken,navigate:navigate})})]})]});};var container=document.querySelector('#container');var root=ReactDOM.createRoot(container);root.render(/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})}));/*\nLogin\nRegistration\nPosts\nProfile\nNav Bar\nAdd Post\nSearch\n*/","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","Route","BrowserRouter","Routes","useNavigate","Navbar","Posts","Profile","Home","Register","Login","CreatePost","SinglePostView","EditPost","getPosts","getUserDetails","App","posts","setPosts","token","setToken","user","setUser","navigate","logout","window","localStorage","removeItem","fetchPosts","results","data","getMe","storedToken","getItem","success","console","log","error","message","container","document","querySelector","root","createRoot","render"],"sources":["/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { Route, BrowserRouter, Routes, useNavigate } from 'react-router-dom';\nimport './style.css';\nimport {\n    Navbar,\n    Posts,\n    Profile,\n    Home,\n    Register,\n    Login,\n    CreatePost,\n    SinglePostView,\n    EditPost\n} from './components';\n\nimport {\n    getPosts,\n    getUserDetails\n} from './api';\n\nconst App = () => {\n    const [posts, setPosts] = useState([]);\n    const [token, setToken] = useState('');\n    const [user, setUser] = useState({});\n\n    const navigate = useNavigate();\n\n    function logout() {\n        window.localStorage.removeItem('token');\n        setToken('');\n        setUser({});\n    }\n\n    async function fetchPosts() {\n        const results = await getPosts(token)\n        setPosts(results.data.posts);\n    }\n\n    async function getMe() {\n        const storedToken = window.localStorage.getItem('token');\n\n        if (!token) {\n            if (storedToken) {\n                setToken(storedToken);\n            }\n            return;\n        }\n\n        const results = await getUserDetails(token)\n        if (results.success) {\n            setUser(results.data);\n        } else {\n            console.log(results.error.message);\n        }\n    }\n\n    useEffect(() => {\n        fetchPosts();\n    }, [token])\n\n    useEffect(() => {\n        getMe();\n    }, [token])\n\n    return (\n        <div>\n            <Navbar logout={logout} token={token} />\n            <Routes>\n                <Route\n                    path='/'\n                    element={<Home />}\n                />\n                <Route\n                    path='/posts'\n                    element={<Posts\n                        posts={posts}\n                    />}\n                />\n                <Route\n                    exact path='posts/create-post'\n                    element={<CreatePost\n                        fetchPosts={fetchPosts}\n                        token={token}\n                        navigate={navigate}\n                    />}\n                />\n                <Route\n                    exact path='/posts/edit-post/:postID'\n                    element={<EditPost\n                        posts={posts}\n                        token={token}\n                        fetchPosts={fetchPosts}\n                        navigate={navigate}\n                    />}\n                />\n                <Route\n                    path='/posts/:postID'\n                    element={<SinglePostView\n                        posts={posts}\n                        token={token}\n                        navigate={navigate}\n                    />}\n                />\n                <Route\n                    path='/profile'\n                    element={<Profile\n                        user={user}\n                    />}\n                />\n                <Route\n                    path='/register'\n                    element={<Register\n                        setToken={setToken}\n                        token={token}\n                        navigate={navigate}\n                    />}\n                />\n                <Route\n                    path='/login'\n                    element={<Login\n                        setToken={setToken}\n                        navigate={navigate}\n                    />}\n                />\n            </Routes>\n        </div>\n    )\n}\n\nconst container = document.querySelector('#container');\nconst root = ReactDOM.createRoot(container);\nroot.render(\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n);\n\n/*\nLogin\nRegistration\nPosts\nProfile\nNav Bar\nAdd Post\nSearch\n*/"],"mappings":"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"},"metadata":{},"sourceType":"module"}