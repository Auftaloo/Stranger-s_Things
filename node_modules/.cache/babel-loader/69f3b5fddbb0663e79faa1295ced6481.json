{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useParams,Link}from'react-router-dom';import{createMessage,deletePost}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var postID=_ref.postID,token=_ref.token,navigate=_ref.navigate;var _useState=useState({content:''}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];//we need 3 things to make this request\n//Post-id, token, message object containing the content of the message\nfunction addMessage(){return _addMessage.apply(this,arguments);}function _addMessage(){_addMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createMessage({postID:postID,message:message,token:token});case 2:case\"end\":return _context.stop();}}},_callee);}));return _addMessage.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{id:\"messageForm\",className:\"messageForm\",onSubmit:function onSubmit(event){event.preventDefault();addMessage();navigate('/post');},children:[/*#__PURE__*/_jsx(\"input\",{className:\"messageInput\",type:\"text\",placeholder:\"Enter Message\",onChange:function onChange(event){return setMessage({content:event.target.value});}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"messageSubmit\",onClick:function onClick(){addMessage();navigate('/posts');},children:\"Send Message\"})]});};var SinglePostView=function SinglePostView(_ref2){var posts=_ref2.posts,token=_ref2.token,getMe=_ref2.getMe,navigate=_ref2.navigate;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activateMessage=_useState4[0],setActivateMessage=_useState4[1];var _useParams=useParams(),postID=_useParams.postID;if(posts.length){var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,isAuthor=currentPost.isAuthor;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Will Deliver: \",willDeliver]})]}),isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Back\"})}),/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(token,postID);},children:\"Delete\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Back\"})}),token&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setActivateMessage(!activateMessage);},children:\"Message User\"}),activateMessage&&/*#__PURE__*/_jsx(SendMessage,{token:token,postID:postID,navigate:navigate,getMe:getMe})]})]})]});}else{return/*#__PURE__*/_jsx(\"h2\",{children:\"Waiting for Posts...\"});}};export default SinglePostView;","map":{"version":3,"names":["React","useState","useParams","Link","createMessage","deletePost","SendMessage","postID","token","navigate","content","message","setMessage","addMessage","event","preventDefault","target","value","SinglePostView","posts","getMe","activateMessage","setActivateMessage","length","filter","post","_id","currentPost","title","description","location","price","willDeliver","isAuthor"],"sources":["/Users/stephaniepierce/Documents/Course_Work/week_13/Strangers_Things/src/components/singlePostView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { createMessage, deletePost } from '../api';\n\nconst SendMessage = ({ postID, token, navigate }) => {\n    const [message, setMessage] = useState({ content: '' });\n    //we need 3 things to make this request\n    //Post-id, token, message object containing the content of the message\n    async function addMessage() {\n        await createMessage({ postID, message, token });\n    }\n    return (\n        <form\n            id='messageForm'\n            className='messageForm'\n            onSubmit={(event) => {\n                event.preventDefault();\n                addMessage();\n                navigate('/post')\n            }}>\n            <input\n                className='messageInput'\n                type='text'\n                placeholder='Enter Message'\n                onChange={(event) => setMessage({ content: event.target.value })}\n            />\n            <button type='submit'\n                className='messageSubmit'\n                onClick={() => {\n                    addMessage();\n                    navigate('/posts')\n                }}>Send Message</button>\n        </form>\n    )\n}\n\nconst SinglePostView = ({ posts, token, getMe, navigate }) => {\n    const [activateMessage, setActivateMessage] = useState(false);\n\n    const { postID } = useParams();\n\n    if (posts.length) {\n        const [currentPost] = posts.filter(post => post._id === postID);\n        const { title, description, location, price, willDeliver, isAuthor } = currentPost;\n\n        return (\n            <div>\n                <div>\n                    <h3>{title}</h3>\n                    <p>Description: {description}</p>\n                    <p>Price: {price}</p>\n                    <p>Location: {location}</p>\n                    <p>Will Deliver: {willDeliver}</p>\n                </div>\n                {\n                    isAuthor ? (\n                        <>\n                            <Link to='/posts'>\n                                <button>\n                                    Back\n                                </button>\n                            </Link>\n                            <Link to='/posts'>\n                                <button\n                                    onClick={() => deletePost(token, postID)}>\n                                    Delete\n                                </button>\n                            </Link>\n                        </>\n                    ) : (\n                        <>\n                            <Link to='/posts'>\n                                <button>\n                                    Back\n                                </button>\n                            </Link>\n                            {token &&\n                                <>\n                                    <button\n                                        onClick={() => setActivateMessage(!activateMessage)}>\n                                        Message User\n                                    </button>\n                                    {\n                                        activateMessage &&\n                                        <SendMessage token={token}\n                                            postID={postID}\n                                            navigate={navigate}\n                                            getMe={getMe} />\n                                    }\n                                </>\n                            }\n                        </>\n                    )\n                }\n            </div>\n        )\n    } else {\n        return (\n            <h2>Waiting for Posts...</h2>\n        )\n    }\n}\n\nexport default SinglePostView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}